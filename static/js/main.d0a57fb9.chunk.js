(this["webpackJsonptodo-ui"]=this["webpackJsonptodo-ui"]||[]).push([[0],{10:function(t,e,n){t.exports=n(18)},15:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),i=n(8),o=n.n(i),r=(n(15),n(5)),c=n(6),l=n.n(c),u=n(9),d=n(1),h=n(2),m=n(4),p=n(3),f=s.a.createContext({});function g(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}var k=function(t){Object(m.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).changeHandler=function(t){var e={};e[t.target.getAttribute("name")]=t.target.value,a.setState(e)},a.handleSubmit=function(t){t.preventDefault();var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)};fetch("https://api-todo-ji.herokuapp.com/api/tasks",e).then((function(t){return t.json()})).then((function(t){console.log("should have added a new task: ",t),a.context.getTasks()})).catch((function(t){console.log("might not have added a new task: ",t)}))},a.state={listId:t.listId||"error",name:t.name||"",description:t.description||"",due:t.due||"",status:t.status||"pending"},a}return Object(h.a)(n,[{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"taskRow"},s.a.createElement("input",{name:"name",value:this.state.name,onChange:this.changeHandler,placeholder:"Name"}),s.a.createElement("input",{name:"description",value:this.state.description,onChange:this.changeHandler,placeholder:"Description"}),s.a.createElement("input",{name:"due",value:this.state.due,onChange:this.changeHandler,placeholder:"due"}),s.a.createElement("input",{className:"small",type:"submit",value:"Add Task"})))}}]),n}(s.a.Component);k.contextType=f,Array.prototype.findById=function(t){console.log("filter array by id: ",t),console.log("this arg: ",this);var e=this.filter((function(e){return e._id===t}));return e.length>1&&console.log("Why does life hate met?"),e[0]};var v=function(t){Object(m.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).renderTasks=function(){console.log("getting tasks..."),a.setState({tasks:a.context.tasks.filter((function(t){return t.listId===a.props.listId}))},(function(){var t=this;this.setState({taskElements:this.state.tasks.map((function(e){return s.a.createElement("li",{key:g()},s.a.createElement("span",null,e.name)," - ",s.a.createElement("span",null,e.description),s.a.createElement("span",null,e.due),t.statusBox(e))}))},(function(){console.log("state after update: ",this.state)}))}))},a.statusBox=function(t){return s.a.createElement("input",{key:g(),id:t._id,type:"checkbox",checked:"complete"===t.status,onChange:a.handleCheck})},a.handleCheck=function(t){var e=t.target.getAttribute("id"),n=a.state.tasks.findById(e),s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"complete"===n.status?"pending":"complete"})};fetch("https://api-todo-ji.herokuapp.com/api/tasks/".concat(e),s).then((function(t){return t.json()})).then((function(t){console.log("update data: ",t),a.context.getTasks().then((function(t){return a.renderTasks()})).catch((function(t){console.log("This will never error....so.....")}))})).catch((function(t){console.log("failed to update: ",t)}))},a.state={tasks:[],taskElements:null},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.renderTasks()}},{key:"render",value:function(){return s.a.createElement("section",{className:"taskList"},s.a.createElement("ul",null,this.state.taskElements,s.a.createElement("li",{key:g()},s.a.createElement(k,{listId:this.props.listId}))))}}]),n}(s.a.Component);v.contextType=f;var E=function(t){Object(m.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).changeHandler=function(t){var e={};e[t.target.getAttribute("name")]=t.target.value,a.setState(e)},a.handleSubmit=function(t){t.preventDefault(),console.log("first state: ",a.state);var e="https://api-todo-ji.herokuapp.com/api/lists",n=Object(r.a)({},a.state);delete n._id;var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};"new"!==a.state._id&&(s.method="PUT",e+="/".concat(a.state._id)),console.log("state: ",a.state),console.log("route: ",e),console.log("fetchOptions: ",s),fetch(e,s).then((function(t){return t.json()})).then((function(t){console.log("result: ",t),a.context.getLists()})).catch((function(t){console.log("Error updating/creating list: ",t)}))},a.getListTasks=function(t){var e;if(t.target)e=t.target.getAttribute("id");else{if("string"!==typeof t)throw new Error("I have no idea what you are trying to do...");e=t}return"new"===t?null:a.context.tasks.filter((function(t){return t.listId&&t.listId===e})).map((function(t){return s.a.createElement("li",{key:t._id,id:t._id,onClick:a.updateTask},t.name||"Unknown")}))},a.addTask=function(t){t.preventDefault()},a.state={_id:t._id||"new",name:t.name||"",description:t.description||""},a}return Object(h.a)(n,[{key:"componentWillUnmount",value:function(){console.log("unmounting")}},{key:"render",value:function(){var t="Create",e=null;return"new"!==this.state._id&&(t="Update",e=s.a.createElement(v,{listId:this.props._id})),s.a.createElement("section",{className:"forms-section"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form-field"},s.a.createElement("label",null,"Name"),s.a.createElement("input",{name:"name",value:this.state.name,onChange:this.changeHandler})),s.a.createElement("div",{className:"form-field"},s.a.createElement("label",null,"Description"),s.a.createElement("input",{name:"description",value:this.state.description,onChange:this.changeHandler})),s.a.createElement("input",{type:"submit",value:t})),e)}}]),n}(s.a.Component);E.contextType=f;n(17);var y=function(t){Object(m.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(d.a)(this,n),(t=e.call(this)).getTasks=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api-todo-ji.herokuapp.com/api/tasks").then((function(t){return t.json()})).then((function(e){console.log("data from api: ",e),t.setState({tasks:e,taskList:e.map((function(e){return s.a.createElement("li",{key:e._id,id:e._id,onClick:t.updateTask},e.username||"Unknown")})),editForm:""})})).catch();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),t.getLists=function(){fetch("https://api-todo-ji.herokuapp.com/api/lists").then((function(t){return t.json()})).then((function(e){console.log("lists from api: ",e),t.setState({lists:e,listElements:e.map((function(e){return s.a.createElement("div",{key:e._id},s.a.createElement("li",{id:e._id,onClick:t.updateListDisplay},e.name||"Unknown"),s.a.createElement("button",{className:"deleteButton",id:e._id,onClick:t.deleteList},"X"))})),editForm:null,thingToDisplay:null})})).catch()},t.updateListDisplay=function(e){e.preventDefault();var n=e.target.getAttribute("id"),a=t.state.lists.filter((function(t){return t._id===n}));a=a[0],t.setState({thingToDisplay:null},(function(){this.setState({thingToDisplay:s.a.createElement(E,Object.assign({key:g()},a))})}))},t.deleteList=function(e){console.log("deleting..."),e.preventDefault();var n=e.target.getAttribute("id");console.log("id: ",n);fetch("https://api-todo-ji.herokuapp.com/api/lists/".concat(n),{method:"DELETE"}).then((function(t){return t.json()})).then((function(e){console.log("response from api: ",e),t.getLists()})).catch()},t.doCreateListThing=function(e){e.preventDefault(),t.setState({thingToDisplay:s.a.createElement(E,{key:g()})})},t.state={tasks:[],taskList:[],editForm:"",listId:"",lists:[],listElements:[],listTasks:[],thingToDisplay:null},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getTasks(),this.getLists()}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(f.Provider,{value:Object(r.a)(Object(r.a)({},this.state),{},{getLists:this.getLists,getTasks:this.getTasks})},s.a.createElement("section",{className:"controls"},s.a.createElement("section",{className:"buttons"},s.a.createElement("button",{onClick:this.doCreateListThing},"Create List")),s.a.createElement("section",{className:"my-lists"},s.a.createElement("h2",null,"My Lists"),s.a.createElement("ul",null,this.state.listElements))),s.a.createElement("section",{className:"content"}," ",this.state.thingToDisplay)))}}]),n}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.d0a57fb9.chunk.js.map